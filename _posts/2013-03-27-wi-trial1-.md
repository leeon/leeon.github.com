---
layout: post
title: "WI輸入法開發小記"
description: "WI輸入法開發團隊，開發過程和記錄"
category: 項目開發
---
{% include JB/setup %}

看了一下我們的用戶數量統計，不禁感嘆一下，時間過去了這麼久。*WI輸入法*android版本已經是`1.3`了，想起了無數的`alpha`和`beta`版本，也想起了曾經和老師的理論要不要做。大二暑假，剛剛結束了手機QQ瀏覽器大賽回到實驗室，聽到了一個振奮的消息，就是我們準備要做android版本的輸入法了，之前WI在`IOS`上已經獲得了小小的成功，培養了一大批忠實的粉絲，所以我的肩上壓力也很大，其實壓力更大的還是來自於技術，畢竟面前就是一張白紙，但是不管怎麼樣，開始乾！這樣我和小波的兩人團隊就組成了，他是ACMer，對NLP的知識瞭解比較多，所以負責修改內核掛接的工作，而我更偏工程一些，負責輸入法框架的設計和實現。

###萬事開頭難
對於一個項目的開始，慣性的就想到了軟件工程的東西：需求採集、分析；設計，編碼，測試等等。但是輸入法作為一種特殊的應用，或許用傳統的這套東西並不現實，而且目前團隊裡面只有兩個人，意義並不大。前期最重要的任務是能夠從技術的角度上實現一個可以將拼音串轉化為中文字符的系統。既然專注於技術，那麼最明顯的一個問題就是架構，任何一個大的項目都必須有一個清晰的架構，就如同人的骨骼一樣。對於輸入法這樣的東西，我還是freshman，於是google了一些開源的輸入法框架，學習了很多，最多的還是閱讀android自帶輸入法的源碼，原因有兩個：一是這個框架很簡單，和原生系統融合的更好，二是google的代碼真的適合學習和閱讀。這個對於我們的開發影響很大，經過N張塗塗畫畫的草稿後，我們自己的框架基本確定了，它符合兩個標準，兼容android原生輸入框架以提高效率；功能可擴展性。


###需要甚麼
當然一個程序的框架都不是簡單畫畫就可以的，這個過程仔細體會需要哪些東西呢？或者需要學習甚麼？我列舉如下：


- 對於面向對象開發的理解（android應用層採用java編寫，如果你閱讀過android的源碼，就會發現裡面到處都是面向對象的精彩實現）
- 源碼閱讀能力（對於學生群體，做比較大的項目的時候，設計框架，還是要多參考一些優秀的開源項目，閱讀項目的能力很重要，這是我推薦在大學學習java的原因，因為jdk的源碼裡面有太多東西值得我們學習）
- 項目經驗（在實驗室參與一些項目，發現這個很重要，做項目一定是循序漸進的，比如大部分軟件工程的學生都是從XX管理系統開始的，你的第一個管理系統很重要）
- 編碼能力（包括語言本身的運用，以及基本的算法知識）



###團隊開發
當框架搭建的差不多的時候，LAB_HIT來到了我們的團隊。團隊開發的質量決定於三個因素：人員，技術，外界環境。在人員的這個方面，我們幾乎沒遇到甚麼問題，兩個隊友都非常的nice，平時沒有課的時候基本一起在實驗室，所以溝通的成本很低。每個人對於技術的理解能力也不錯，每次問題都可以提出的很明白清晰。可貴的是我和LAB_HIT都是java的愛好者，並且喜歡研究與其相關的技術，所以合作非常的爽。技術方面，首先便是版本控制等team開發必備的工具，我個人推薦git,但是考慮到還是選擇一個大家都能熟悉使用的，便選為了svn 。大家彼此約定好，每次寫代碼之前要做的第一件事情就是check out，大家都有實訓的經歷，所以不要怎麼強調了。其次便是開發輸入法的技術，我擁有android開發的經驗，小波擅長算法和C編程，LAB_HIT則有很好的java編碼水平以及美工。所以我們三個基本覆蓋了所需的技術。最後一個因素外界環境，對我們唯一有影響的便是略顯繁重的課程了，當時正值編譯原理課程，所以基本上就是編譯的實驗要留到半夜去寫了。這其中也有大家的奉獻精神，我們彼此鼓勵吧。


###幾點體會


- 聯調bug可以提高效率（我們人員比較少，所以溝通的成本低，聯調BUG可以更快的定位到出錯的具體位置）

- 代碼規範（每一個軟件工程的學生都應該知道的准則，特別是在工程開發中，必須約定代碼規範，編碼格式，注釋，代碼風格等，可學習google或者sun的編碼規範）
- Fail fast 這是程序設計的一個術語，但是在工程中同樣重要，一定要把問題比較早的拋出來，大家一起解決。
- 選擇正確的隊友（這個其實最重要，合作一定要愉快）



###應對難題
開發過程中遇到難以逾越的難題是必然的，現在回顧真是數不過來，但是決定命運的難題有兩個，一是我們不能過度的依賴android系統的輸入服務類，二是我們要實現向上的擴展詞（國內主流輸入法都是將擴展的候選詞覆蓋在鍵盤上，不方便用戶繼續編輯，iphone系統輸入法採用的是向上擴展候選詞）。第一個問題導致我們開發很多功能受限，因為要和iphone上的WI輸入法保持一致，我們需要更多的自定義功能，再使用系統的類就會使得代碼越來越臃腫，所以必須要有我們自己的視圖邏輯處理類。大三寒假，成功的攻克了這個問題。第二個難題是缺乏開發的經驗，因為沒有可參照的程序，解決這個問題的時候，我也深深反思了自己，從大一開始學習編程的那一刻起，我們的學習模式便是模仿，久而久之，養成了一種習慣，無論要寫甚麼，都會去查相關的資料，然後模仿。我想這大概也是經常在國外的技術社區看到他們各種各樣新奇的idea，而自己卻缺乏創意的原因吧。使用github和stackoverflow這兩個網站，就會發現國外有很多程序員，他們敢想，敢做。值得去學習。


###一些收穫




- 把問題描述清楚（一個好的方法是把問題寫到紙上，像遞歸一樣，寫出所有依賴的問題，逐一解決）
- 如果問題是開發一個新的組件，建議使用迭代式的開發
- get things done （看解決不了問題，動手寫）
- 尋求幫助（同學或者`stackoverflow`）



###完善上線
團隊在後期又加入了老任同學（他負責了後期的輸入法更新工作），和我們一起最後完善輸入法，將其打造成一個真正的互聯網產品。期間我們發佈了不少的內測版本，收到了各種各樣的反饋。細節決定成敗，在最後的階段，感觸於大家努力的完善每一個細節，老任和LAB_HIT一起不斷地調整一個候選詞的陰影效果，讓大家佩服。其實對於我們來講，運營一個產品也是完全沒有經驗的，輸入法更多的還是依靠口碑相傳。至此就是一個簡單的產品週期了。



>如果您對WI輸入法感興趣，強烈推薦安裝試一下，期待您的支持。官方網站：[訪問](http://wi.hit.edu.cn/im/)
>如果您對於產品其他方面或者技術感興趣，可以通過[leeon.org](http://leeon.org) 與我聯繫。